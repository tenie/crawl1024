<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="assets/ico/favicon.png">

    <title>Victoria vCard - Free Bootstrap 3 Theme</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="assets/css/main.css" rel="stylesheet">
    
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
      <script src="assets/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body style="padding-top: 60px;">


    <div class="container">
    	<div class="col-lg-12">
    	
    		<!-- ===== vCard Navigation ===== -->
    		<div class="row w" style="    height: 500px;">
    			<div class="col-md-4">
    				<!-- <img class="img-responsive" src="assets/img/head.png" alt=""> -->
					<ul class="nav nav-tabs nav-stacked" id="myTab">
					  <li class="active"><a href="#about">单页面</a></li>
					  <li><a href="#portfolio">多页面批处理</a></li>
					  <li><a href="#profile">代理配置</a></li>
					  <li><a href="#contact">图片下载</a></li>
					<!--   <li><a  id="foobtn">foobtn</a></li> -->
					</ul>    			
				</div><!-- col-md-4 -->

    		<!-- ===== vCard Content ===== -->
    			<div class="col-md-8">
	    			<div class="tab-content">
	    			
	    			  <!-- ===== First Tab ===== -->
					  <div class="tab-pane active" id="about">
					  <form id="form1">
					 
					  	<h3>获取单个页面中的图片URL字符串</h3> 
					  	<hr>
					  	<p>
					  		单个页面url:<input name="url1"  >
					  		元素选择器表达式:<input name="select"  >
					  		<button id="btn1">提交</button>
					    </p> 
					  	<textarea id="viewURL" rows="12" cols="80" readonly > </textarea>
			
					  </form>
					  </div><!-- tab about -->
					  
	    			  <!-- ===== Second Tab ===== -->
					  <div class="tab-pane" id="profile">
					  	<h4><i class="icon-briefcase"></i> 代理设置,翻墙用的代理服务器</h4>
					  	<p class="sm">
					  		<grey>代理服务器地址:<input name="host" id="host"></grey>
					  		<grey>端口:<input name="port" id="port"></grey> 
					  		<button id="setProxybtn">提交</button><br/>
					  	</p>
					  
						   
					  </div><!-- Tab Profile -->
					  
	    			  <!-- ===== Third Tab ===== -->
					  <div class="tab-pane" id="portfolio">
						   <form id="form2">
					 
					  	<h3>获取多个页面中的元素</h3>
					  	<!-- <h5>Web Designer</h5> -->
					  	<hr>
					  	<p>
					  		多页面url:<textarea name="url1"  rows="3" cols="80" ></textarea><br>
					  		元素选择器:<br><input name="select"  >
					  		<button id="btn2">提交</button>
					    </p> 
					  	<textarea id="viewURL2" rows="7" cols="80" readonly > </textarea>
					  <!-- 	<p class="pull-right red"><i class="icon-heart"></i></p> -->
					  </form>
					  </div><!-- /Tab Portfolio -->
					  
	    			  <!-- ===== Fourth Tab ===== -->
					  <div class="tab-pane" id="contact">
						  <h4>根据具体图片url下载</h4>
						  <hr>
						  <div class="row">
						   		<div class="col-xs-6">
							  		<textarea name="imgUrls" id="imgUrls" rows="12" cols="80" ></textarea><br>
							  		<button id="imgDownloadBtn">爬取</button>
							   </div><!-- col-xs-6 -->
							  
						  </div><!-- row -->
						  
						 
					  </div><!-- Tab Contact -->
					  
					</div><!-- Tab Content -->
    			</div><!-- col-md-8 -->
    		</div><!-- row w -->
    	</div><!-- col-lg-6 -->
    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    
    <script src="assets/js/vue.min.js"></script>
<script>
//@ sourceURL=jsname.js
	$('#myTab a').click(function (e) {
	  e.preventDefault()
	  $(this).tab('show')
	})	
	
	$("#setProxybtn").click(function(){
		$.get("/setProxy/"+$("#host").val()+"/"+$("#port").val(),function(date){
			alert(date)
		})
		
	})
	
	$("#btn1").click(function(){
		
		$.post("/url",$("#form1").serialize(),function(data){
			var html ="";
			$.each(data,function(i,val){
				 html+=val+"\n";
			})
			$("#viewURL").val(html);
		})
		return false;
	})
	
	$("#btn2").click(function(){
		 
		$.post("/urls",$("#form2").serialize(),function(data){
			  
			var html ="";
			$.each(data,function(i,val){
				 html+=val+"\n";
			})
			$("#viewURL2").val(html);
		})
		return false;
	})
	//后台下载图片
	$("#imgDownloadBtn").click(function(){ 
		var btn =$(this)
		btn.attr("disabled",true);
		btn.text("爬取ing")
		var index = 0;
		$.post("/downloadImage",{imgUrls:$("#imgUrls").val()},function(data){
			alert(data) 
		})
		var done = setInterval(function(){
				$.get("/downloadFinish",function(rs){
					//alert("done"+index++);
					if(rs == "done"){
						clearInterval(done);
						//alert("完成")
						btn.text("爬取");
						btn.removeAttr("disabled");
						
					}else{
						
					}
				})
			},2000)
		
	})
	</script>    
    
  </body>
</html>
